Index: src/error.c
--- src/error.c.orig
+++ src/error.c
@@ -13,7 +13,6 @@
 #include <stdio.h>
 #include <string.h>
 #include <sys/param.h>
-#include <sys/random.h>
 #include <unistd.h>
 
 #include "efiboot.h"
@@ -141,7 +140,7 @@ efi_error_pop(void)
 
 static int efi_verbose;
 static FILE *efi_errlog, *efi_dbglog;
-#ifndef ANDROID
+#if !defined(ANDROID) && !defined(__OpenBSD__)
 static int efi_dbglog_fd = -1;
 static intptr_t efi_dbglog_cookie;
 #endif
@@ -153,7 +152,7 @@ efi_set_loglevel(int level)
 	log_level = level;
 }
 
-#ifndef ANDROID
+#if !defined(ANDROID) && !defined(__OpenBSD__)
 static ssize_t
 dbglog_write(void *cookie, const char *buf, size_t size)
 {
@@ -191,7 +190,7 @@ dbglog_write(void *cookie, const char *buf, size_t siz
 }
 
 static int
-dbglog_seek(void *cookie UNUSED, off64_t *offset, int whence)
+dbglog_seek(void *cookie UNUSED, off_t *offset, int whence)
 {
 	FILE *log = efi_errlog ? efi_errlog : stderr;
 	int rc;
@@ -249,7 +248,7 @@ efi_error_fini(void)
 static void CONSTRUCTOR
 efi_error_init(void)
 {
-#ifndef ANDROID
+#if !defined(ANDROID) && !defined(__OpenBSD__)
 	ssize_t bytes;
 	cookie_io_functions_t io_funcs = {
 		.write = dbglog_write,
